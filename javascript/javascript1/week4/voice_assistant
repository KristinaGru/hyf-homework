let userName;
const todo = [];

function getReply(command) {
  command = command.toLowerCase();
  if (command.includes('hello my name is')) {
    const words = command.split(' ');
    userName = words[words.length - 1];
    return `Nice to meet you ${userName}`;
  } else if (command === 'what is my name') {
    if (!userName) {
      return 'please introduce yourself';
    } else {
      return userName;
    }
  } else if (command.includes('to my todo') && command.includes('add')) {
    const taskToAdd = command.substring(
      command.indexOf('add') + 4,
      command.lastIndexOf(' to my todo')
    );
    todo.push(taskToAdd);
    return `${taskToAdd} added to your todo`;
  } else if (command.includes('from my todo') && command.includes('remove')) {
    const taskToRemove = command.substring(
      command.indexOf('remove') + 7,
      command.lastIndexOf(' from my todo')
    );
    for (const item of todo) {
      if (item === taskToRemove) {
        todo.splice(todo.indexOf(item), 1);
        return `Removed ${taskToRemove} from your todo`;
      }
    }
  } else if (command === 'what is on my todo?') {
    if (todo.length === 1) {
      return `You have 1 todo - ${todo[0]}`;
    } else if (todo.length === 1) {
      return 'You have nothing on your todo';
    } else {
      return `You have ${todo.length} todos - ${
        todo.slice(0, -1).join(', ') + ' and ' + todo.slice(-1)
      }.`;
    }
  }
}

console.log(getReply('What is my name'));
console.log(getReply('Hello my name is Kristina'));
console.log(getReply('What is my name'));
console.log(getReply('Add fishing to my todo'));
console.log(todo);
console.log(getReply('Add singing in the shower to my todo'));
console.log(todo);
console.log(getReply('Remove singing in the shower from my todo'));
console.log(todo);
console.log(getReply('Add dancing to my todo'));
console.log(getReply('Add singing in the shower to my todo'));
console.log(todo);
console.log(getReply('what is on my todo?'));
